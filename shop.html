<!doctype html>
<html lang="en">
  <head><meta name="viewport" http-equiv="Content-Type" content="text/html; charset=utf-8">
    

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="css/bootstrap.min.css">

    <link rel="stylesheet" href="css/bootstrap-theme.min.css">

    <link rel="stylesheet" href="store.css">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

  </head>
  <body>

<!-- ====================================================================================== -->

<!--     <div class="jumbotron" style="">
        <div class="row top_margin" style="">
            <div class="col-lg-1 col-sm-0"></div>
            <div class="col-lg-9 col-sm-12 rounded">

                <h1>Robinhood Designs</h1>
            </div>
        </div>
    </div> -->


    <div class="container-fluid" style="height: 10vh;" style="background-color: blue;">
        <div class="row" style="margin-top: 5vh; text-align: center;">
            <div class="col-lg-2">
                <a href="index.html">
                    <p>Home</p>
                </a>
            </div>
            <div class="col-lg-8 col-sm-12"><!-- insert "border"-->
                <h5>Robinhood Designs</h5>
            </div>
            <div class="col-lg-2">
            </div>
        </div>
    </div>

    </div>
<!-- ======================================================================================= -->

<!-- START OF EDUCATION SECTION -->

<!--     <div class="container">
        <div class="row">
            <p id="demo">xx</p>
        </div>
    </div> -->
<!-- ======================================================================================= -->

<!-- START OF EDUCATION SECTION -->

    <div class="container" style="text-align: center;">
        <div class="row" id="product">
            <div class="col-lg-1"></div>
            <div class="col-lg-11" style="text-align: left;">
                <h3>Battery Mounts</h3>
                <hr>
            </div>

            <!-- dynamically created product fields -->
        </div>
    </div><!-- container -->

    <script>
        document.body.onload = getAllBatteries;

        function getAllBatteries(){
            // prod URL:
            var url = "https://robinhood-designs-api.netlify.app/.netlify/functions/app/batteries";
            // dev URL
            //var url = "https://priceless-kare-3dd76e.netlify.app/.netlify/functions/app/batteries";
            fetch(url)
            .then(response => {
                if(response.ok) {
                    return response.json();
                }
                throw new Error();
            })
            .then(data => { 
                data.map(product => {
                    var link = "product.html?id=" + product.id;
                    console.log(link);
                    addCol(product.image, product.title, product.price, link);
                })
            })
            .catch((error) => { // TODO: SET ERROR FOR PRODUCT PAGES
                addCol("images/hart_battery.png", "PRODUCT_TITLE", "PRODUCT_PRICE", "product.html?id=1");
            })
        }

        // addCol => create html elements that make up a product listing on the "Shop" page
        // i => product.image
        // t => product.title
        // p => product.price
        // l => product.link 
        function addCol(i, t, p, l){
            // create the column - lg only
            var col = document.createElement("div");
            col.className = "col-lg-4";

            var img = new Image();
            img.src = i;
            img.className = "img-grid"
            img.alt = "NOTHING TO SEE HERE!";

            // create the title element - h3
            var title = document.createElement("h3");
            var node = document.createTextNode(t);
            title.appendChild(node);

            // create the price element - p-1 // formally addPrice()
            var price = document.createElement("p");
            node = document.createTextNode(p);
            price.appendChild(node);

            // create the link element - p-1 // formally addLink()
            var a = document.createElement("a");
            node = document.createTextNode("Purchase");
            a.appendChild(node);
            a.title = "This is a link";
            a.href=l;
            a.className = "product-link";

            // append elements to the column
            col.appendChild(img);
            col.appendChild(title);
            col.appendChild(price);
            col.appendChild(a);

            // get the row element within the main container & append 
            var element = document.getElementById("product");
            element.appendChild(col);
        }

    </script>


<!-- ====================================================================================== -->


    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="js/dynamic_css.js"></script>
    <script src="js/jquery.min.js"></script>
    <script src="js/bootstrap.min.js"></script>

</body>

<!-- BEGIN WITH FOOTER -->

  <footer class="footer">
        <div class="container">
            <div class="row">
                <div class="col-lg-8"></div>
                <div class="col-lg-1">
                        <a href="https://www.facebook.com/jacob.robinett.58"><i class="fa fa-facebook-square i"></i></a>
                        <a href="https://www.instagram.com/jacob_robinett/"><i class="fa fa-instagram i" href="instagram.com"></i></a>
                        <a href="https://github.com/robibuilder"><i class="fa fa-github i"></i></a>
                </div>
                <div class="col-lg-3">
                    <span class="text-muted i"> Copyright Â© Jacob Robinett</span>
                </div>
                <div class="col-lg-1">
                </div>
            </div>
        </div>
</footer>


</html>